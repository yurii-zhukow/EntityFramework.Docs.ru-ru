---
title: Обзор Entity Framework Core — EF Core
description: Общие вводные сведения об Entity Framework Core
author: ajcvickers
ms.date: 9/20/2020
uid: core/index
ms.openlocfilehash: ccb1fa4cbc0bd1a02e1aeb613475bfe4b2c1d118
ms.sourcegitcommit: f3512e3a98e685a3ba409c1d0157ce85cc390cf4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2020
ms.locfileid: "94429901"
---
# <a name="entity-framework-core"></a>Entity Framework Core

Entity Framework (EF) Core — это простая, кроссплатформенная и расширяемая версия популярной технологии доступа к данным Entity Framework [с открытым исходным кодом](https://github.com/dotnet/efcore).

EF Core может использоваться в качестве объектно-реляционного модуля сопоставления (O/RM), который:

* Позволяет разработчикам .NET работать с базой данных с помощью объектов .NET.
* Устраняет необходимость в большей части кода для доступа к данным, который обычно приходится писать.

EF Core поддерживает множество систем баз данных. Дополнительные сведения см. в разделе [Поставщики баз данных](xref:core/providers/index).

## <a name="the-model"></a>Модель

В EF Core доступ к данным осуществляется с помощью модели. Модель состоит из классов сущностей и объекта контекста, который представляет сеанс взаимодействия с базой данных. Объект контекста позволяет выполнять запросы и сохранять данные. Дополнительные сведения см. в разделе [Создание модели](xref:core/modeling/index).

EF поддерживает следующие подходы к разработке моделей:

* Создание модели на основе существующей базы данных.
* Написание кода модели вручную в соответствии с базой данных.
* После создания модели используйте [Миграции EF](xref:core/managing-schemas/migrations/index) для создания базы данных на основе модели. Миграции позволяют развивать базу данных по мере изменения модели.

[!code-csharp[Main](../../samples/core/Intro/Model.cs)]

## <a name="querying"></a>Выполнение запроса

Экземпляры классов сущностей извлекаются из базы данных с помощью [LINQ](/dotnet/csharp/programming-guide/concepts/linq/). Дополнительные сведения см. в разделе [Выполнение запросов к данным](xref:core/querying/index).

[!code-csharp[Main](../../samples/core/Intro/Program.cs#Querying)]

## <a name="saving-data"></a>Сохранение данных

Для создания, удаления и изменения данных в базе данных используются экземпляры классов сущностей. Дополнительные сведения см. в разделе [Сохранение данных](xref:core/saving/index).

[!code-csharp[Main](../../samples/core/Intro/Program.cs#SavingData)]

## <a name="ef-orm-considerations"></a>Рекомендации по технологиям O/RM для EF

Хотя EF Core хорошо подходит для абстрагирования многих деталей при программировании, существуют некоторые рекомендации, которые применяются ко всем технологиям O/RM и помогают избежать распространенных ошибок в рабочих приложениях.

* Знания базового сервера базы данных на промежуточном уровне или выше необходимы для проектирования, отладки, профилирования и переноса данных в рабочих приложениях с высокой производительностью. Например, знание первичных и внешних ключей, ограничений, индексов, нормализации, инструкций DML и DDL, типов данных, профилирования и т. д.
* Функциональное и интеграционное тестирование:  Важно реплицировать рабочую среду как можно точнее, чтобы:
  * Находить проблемы в приложениях, которые отображаются только при использовании определенной версии или выпуска сервера базы данных.
  * Перехватывать критические изменения при обновлении EF Core и других зависимостей. Например, при добавлении или обновлении платформ, таких как ASP.NET Core, OData или Automapper. Эти зависимости могут повлиять на EF Core неожиданным образом.
* Производительность и нагрузочное тестирование с репрезентативными нагрузками. Упрощенное использование некоторых функций затрудняет масштабирование. К таким случаям относятся: использование Includes в нескольких коллекциях, интенсивное применение отложенной загрузки, условные запросы к неиндексированным столбцам, массовые обновления и вставки с использованием созданных хранилищем значений, отсутствие обработки параллелизма, крупные модели и недостаточная политика кэширования.
* Проверки безопасности: Например, обработка строк подключения и других секретов, разрешения базы данных для операций, не связанных с развертыванием, проверка ввода для необработанных запросов SQL, шифрование конфиденциальных данных.
* Убедитесь, что ведение журнала и диагностика настроены в достаточной степени и в удобной форме. Например, соответствующая конфигурация ведения журнала, теги запросов и Application Insights.
* Восстановление после ошибок. Проанализируйте непредвиденные ситуации для распространенных сценариев сбоев, такие как откат версий, резервные серверы, горизонтальное масштабирование и балансировка нагрузки, устранение атак типа "отказ в обслуживании" и резервное копирование данных.
* Развертывание и миграция приложений. Спланируйте, как будет применяться миграция во время развертывания. Если миграция выполняется при запуске приложения, на нее могут негативно повлиять проблемы с параллелизмом, к тому же для нее потребуются более высокие разрешения по сравнению с обычной работой. Используйте промежуточное хранение, чтобы упростить восстановление после неустранимых ошибок во время миграции. Дополнительные сведения см. в разделе [Применение миграций](xref:core/managing-schemas/migrations/applying).
* Подробное изучение и тестирование созданных миграций. Необходимо тщательно протестировать миграции перед применением к рабочим данным. Форму схемы и типы столбцов невозможно легко изменить, если таблицы содержат рабочие данные. Например, в SQL Server `nvarchar(max)` и `decimal(18, 2)` редко являются наиболее подходящими типами для столбцов, сопоставленных со строковыми и десятичными свойствами. Однако в EF они используются по умолчанию, так как EF не знает о вашем конкретном сценарии.

## <a name="next-steps"></a>Дальнейшие действия

Вводные руководства см. в разделе [Начало работы с Entity Framework Core](xref:core/get-started/overview/first-app).
