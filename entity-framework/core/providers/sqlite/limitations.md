---
title: Поставщик базы данных SQLite — ограничения — EF Core
author: rowanmiller
ms.date: 04/09/2017
ms.assetid: 94ab4800-c460-4caa-a5e8-acdfee6e6ce2
uid: core/providers/sqlite/limitations
ms.openlocfilehash: 17e97da9dfffefeb507fde744b710e6936bff69b
ms.sourcegitcommit: 59e3d5ce7dfb284457cf1c991091683b2d1afe9d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2020
ms.locfileid: "83672772"
---
# <a name="sqlite-ef-core-database-provider-limitations"></a>Ограничения поставщика базы данных SQLite EF Core

Поставщик SQLite имеет ряд ограничений на миграции. Большинство этих ограничений являются следствием ограничений в базовом ядре базы данных SQLite и не относятся к EF.

## <a name="modeling-limitations"></a>Ограничения моделирования

Общая реляционная библиотека (совместно используемая Entity Framework поставщиками реляционных баз данных) определяет интерфейсы API для концепций моделирования, общих для большинства ядер реляционных баз данных. Некоторые из этих концепций не поддерживаются поставщиком SQLite.

* Схемы
* Последовательности

## <a name="query-limitations"></a>Ограничения запросов

SQLite изначально не поддерживает следующие типы данных. EF Core может считывать и записывать значения этих типов, также поддерживается запрос на равенство ( `where e.Property == value` ). Однако для других операций, таких как сравнение и упорядочение, потребуется Оценка на клиенте.

* DateTimeOffset
* Decimal
* TimeSpan
* UInt64

Вместо рекомендуется `DateTimeOffset` использовать значения типа DateTime. При обработке нескольких часовых поясов рекомендуется преобразовать значения в формат UTC перед сохранением, а затем выполнить преобразование в соответствующий часовой пояс.

`Decimal`Тип обеспечивает высокий уровень точности. Однако если такой уровень точности не требуется, вместо него рекомендуется использовать Double. Можно использовать [преобразователь значений](../../modeling/value-conversions.md) , чтобы продолжить использование десятичного разделителя в классах.

``` csharp
modelBuilder.Entity<MyEntity>()
    .Property(e => e.DecimalProperty)
    .HasConversion<double>();
```

## <a name="migrations-limitations"></a>Ограничения миграции

Ядро базы данных SQLite не поддерживает ряд операций с схемами, которые поддерживаются большинством других реляционных баз данных. При попытке применить одну из неподдерживаемых операций к базе данных SQLite `NotSupportedException` будет выдано исключение.

| Операция            | Поддерживается? | Требуется версия |
|:---------------------|:-----------|:-----------------|
| AddColumn            | ✔          | 1.0              |
| аддфореигнкэй        | ✗          |                  |
| аддпримарикэй        | ✗          |                  |
| аддуникуеконстраинт  | ✗          |                  |
| алтерколумн          | ✗          |                  |
| CreateIndex          | ✔          | 1.0              |
| CreateTable          | ✔          | 1.0              |
| DropColumn           | ✗          |                  |
| дропфореигнкэй       | ✗          |                  |
| DropIndex            | ✔          | 1.0              |
| дроппримарикэй       | ✗          |                  |
| DropTable            | ✔          | 1.0              |
| дропуникуеконстраинт | ✗          |                  |
| ренамеколумн         | ✔          | 2.2.2            |
| ренамеиндекс          | ✔          | 2.1              |
| ренаметабле          | ✔          | 1.0              |
| енсуресчема         | ✔ (без op)  | 2.0              |
| DropSchema           | ✔ (без op)  | 2.0              |
| Вставить               | ✔          | 2.0              |
| Update               | ✔          | 2.0              |
| Удалить               | ✔          | 2.0              |

## <a name="migrations-limitations-workaround"></a>Обходные ограничения для миграции

Некоторые из этих ограничений можно решить, вручную записав код в миграции, чтобы выполнить перестроение таблицы. Перестройка таблицы включает в себя переименование существующей таблицы, создание новой таблицы, копирование данных в новую таблицу и удаление старой таблицы. `Sql(string)`Для выполнения некоторых из этих действий потребуется использовать метод.

Дополнительные сведения см. в разделе [внесение других изменений схемы таблицы](https://sqlite.org/lang_altertable.html#otheralter) в документацию по SQLite.

В будущем EF может поддерживать некоторые из этих операций с помощью подхода Rebuild таблицы, как описано в разделе. [Эту функцию можно отвести на нашем проекте GitHub](https://github.com/aspnet/EntityFrameworkCore/issues/329).
