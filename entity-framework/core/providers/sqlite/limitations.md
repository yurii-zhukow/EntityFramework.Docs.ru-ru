---
title: Поставщик базы данных SQLite — ограничения — EF Core
description: Ограничения поставщика базы данных Entity Framework Core SQLite по сравнению с другими поставщиками
author: bricelam
ms.date: 07/16/2020
ms.assetid: 94ab4800-c460-4caa-a5e8-acdfee6e6ce2
uid: core/providers/sqlite/limitations
ms.openlocfilehash: 2657bf03bc5cd0d5fb45c57e7f7605824deb44d2
ms.sourcegitcommit: 7c3939504bb9da3f46bea3443638b808c04227c2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2020
ms.locfileid: "89616532"
---
# <a name="sqlite-ef-core-database-provider-limitations"></a>Ограничения поставщика базы данных SQLite EF Core

Поставщик SQLite имеет ряд ограничений на миграции. Большинство этих ограничений являются следствием ограничений в базовом ядре базы данных SQLite и не относятся к EF.

## <a name="modeling-limitations"></a>Ограничения моделирования

Общая реляционная библиотека (совместно используемая Entity Framework поставщиками реляционных баз данных) определяет интерфейсы API для концепций моделирования, общих для большинства ядер реляционных баз данных. Некоторые из этих концепций не поддерживаются поставщиком SQLite.

* Схемы
* Последовательности

## <a name="query-limitations"></a>Ограничения запросов

SQLite изначально не поддерживает следующие типы данных. EF Core может считывать и записывать значения этих типов, также поддерживается запрос на равенство ( `where e.Property == value` ). Однако для других операций, таких как сравнение и упорядочение, потребуется Оценка на клиенте.

* DateTimeOffset
* Decimal
* TimeSpan
* UInt64

Вместо рекомендуется `DateTimeOffset` использовать значения типа DateTime. При обработке нескольких часовых поясов рекомендуется преобразовать значения в формат UTC перед сохранением, а затем выполнить преобразование в соответствующий часовой пояс.

`Decimal`Тип обеспечивает высокий уровень точности. Однако если такой уровень точности не требуется, вместо него рекомендуется использовать Double. Можно использовать [преобразователь значений](xref:core/modeling/value-conversions) , чтобы продолжить использование десятичного разделителя в классах.

``` csharp
modelBuilder.Entity<MyEntity>()
    .Property(e => e.DecimalProperty)
    .HasConversion<double>();
```

## <a name="migrations-limitations"></a>Ограничения миграции

Ядро базы данных SQLite не поддерживает ряд операций с схемами, которые поддерживаются большинством других реляционных баз данных. При попытке применить одну из неподдерживаемых операций к базе данных SQLite `NotSupportedException` будет выдано исключение.

Будет предпринята попытка перестроения для выполнения определенных операций. Перестроение возможно только для артефактов базы данных, которые являются частью модели EF Core. Если артефакт базы данных не является частью модели, например, если он был создан вручную внутри миграции, то создается `NotSupportedException` исключение.

| Операция            | Поддерживается?  | Требуется версия |
|:---------------------|:------------|:-----------------|
| аддчеккконстраинт   | ✔ (Перестроение) | 5.0              |
| AddColumn            | ✔           | 1.0              |
| аддфореигнкэй        | ✔ (Перестроение) | 5.0              |
| аддпримарикэй        | ✔ (Перестроение) | 5.0              |
| аддуникуеконстраинт  | ✔ (Перестроение) | 5.0              |
| алтерколумн          | ✔ (Перестроение) | 5.0              |
| CreateIndex          | ✔           | 1.0              |
| CreateTable          | ✔           | 1.0              |
| дропчеккконстраинт  | ✔ (Перестроение) | 5.0              |
| DropColumn           | ✔ (Перестроение) | 5.0              |
| дропфореигнкэй       | ✔ (Перестроение) | 5.0              |
| DropIndex            | ✔           | 1.0              |
| дроппримарикэй       | ✔ (Перестроение) | 5.0              |
| DropTable            | ✔           | 1.0              |
| дропуникуеконстраинт | ✔ (Перестроение) | 5.0              |
| ренамеколумн         | ✔           | 2.2.2            |
| ренамеиндекс          | ✔ (Перестроение) | 2.1              |
| ренаметабле          | ✔           | 1.0              |
| енсуресчема         | ✔ (без op)   | 2.0              |
| DropSchema           | ✔ (без op)   | 2.0              |
| Атрибут Insert               | ✔           | 2.0              |
| Update               | ✔           | 2.0              |
| DELETE               | ✔           | 2.0              |

## <a name="migrations-limitations-workaround"></a>Обходные ограничения для миграции

Некоторые из этих ограничений можно решить, вручную записав код в миграции для выполнения перестроения. Перестроение таблиц подразумевает создание новой таблицы, копирование данных в новую таблицу, удаление старой таблицы и переименование новой таблицы. `Sql(string)`Для выполнения некоторых из этих действий потребуется использовать метод.

Дополнительные сведения см. в разделе [внесение других изменений схемы таблицы](https://sqlite.org/lang_altertable.html#otheralter) в документацию по SQLite.
