---
title: Создание модели — EF6
author: divega
ms.date: 2018-07-05
ms.prod: entity-framework
ms.author: divega
ms.manager: avickers
ms.technology: entity-framework-6
ms.topic: article
ms.assetid: 4890228E-CEA1-4595-B8AD-CA81253F8767
caps.latest.revision: 3
ms.openlocfilehash: e1eb4077a1fd77c66bb3e992e1d25a5de4fcc64c
ms.sourcegitcommit: 45494121254ad4fdcec613d1dd22d850068d6f39
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2018
ms.locfileid: "37913516"
---
# <a name="creating-a-model"></a><span data-ttu-id="3fd42-102">Создание модели</span><span class="sxs-lookup"><span data-stu-id="3fd42-102">Creating a Model</span></span>

<span data-ttu-id="3fd42-103">Модель EF хранит сведения о сопоставлении классов и свойств приложений с таблицами и столбцами баз данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-103">An EF model stores the details about how application classes and properties map to database tables and columns.</span></span> <span data-ttu-id="3fd42-104">Модель EF можно создать двумя способами.</span><span class="sxs-lookup"><span data-stu-id="3fd42-104">There are two main ways to create an EF model:</span></span>

- <span data-ttu-id="3fd42-105">**С помощью Code First**: разработчик пишет код, чтобы указать модель.</span><span class="sxs-lookup"><span data-stu-id="3fd42-105">**Using Code First**: The developer writes code to specify the model.</span></span> <span data-ttu-id="3fd42-106">Во время выполнения EF создает модели и сопоставления на основе классов сущностей и дополнительной конфигурации модели, предоставленных разработчиком.</span><span class="sxs-lookup"><span data-stu-id="3fd42-106">EF generates the models and mappings at runtime based on entity classes and additional model configuration provided by the developer.</span></span>

- <span data-ttu-id="3fd42-107">**С помощью Entity Framework Designer**: разработчик рисует поля и строки для указания модели с помощью Entity Framework Designer.</span><span class="sxs-lookup"><span data-stu-id="3fd42-107">**Using the EF Designer**: The developer draws boxes and lines to specify the model using the EF Designer.</span></span> <span data-ttu-id="3fd42-108">Результирующая модель хранится в виде XML-файла с расширением EDMX.</span><span class="sxs-lookup"><span data-stu-id="3fd42-108">The resulting model is stored as XML in a file with the EDMX extension.</span></span> <span data-ttu-id="3fd42-109">Объекты предметной области приложения обычно создаются автоматически на основе концептуальной модели.</span><span class="sxs-lookup"><span data-stu-id="3fd42-109">The application's domain objects are typically generated automatically from the conceptual model.</span></span>

## <a name="ef-workflows"></a><span data-ttu-id="3fd42-110">Рабочие процессы EF</span><span class="sxs-lookup"><span data-stu-id="3fd42-110">EF workflows</span></span>

<span data-ttu-id="3fd42-111">Оба этих подхода можно применять для использования в целевой базе данных или создания базы данных, что в итоге составляет 4 различных рабочих процесса.</span><span class="sxs-lookup"><span data-stu-id="3fd42-111">Both of these approaches can be used to target an existing database or create a new database, resulting in 4 different workflows.</span></span>
<span data-ttu-id="3fd42-112">Узнайте, какие из них подходят вам лучше всего.</span><span class="sxs-lookup"><span data-stu-id="3fd42-112">Find out about which one is best for you:</span></span>  

|                                           | <span data-ttu-id="3fd42-113">Мне нужно просто написать код…</span><span class="sxs-lookup"><span data-stu-id="3fd42-113">I just want to write code...</span></span>                                                                                                                   | <span data-ttu-id="3fd42-114">Я хочу использовать конструктор...</span><span class="sxs-lookup"><span data-stu-id="3fd42-114">I want to use a designer...</span></span>                                                                                                                        |
|:------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3fd42-115">**Я создаю базу данных**</span><span class="sxs-lookup"><span data-stu-id="3fd42-115">**I am creating a new database**</span></span>          | [<span data-ttu-id="3fd42-116">Используйте **Code First** для определения модели в коде, а затем создайте базу данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-116">Use **Code First** to define your model in code and then generate a database.</span></span>](~/ef6/modeling/code-first/workflows/new-database.md)           | [<span data-ttu-id="3fd42-117">Используйте **Model First** для определения модели с помощью полей и строк, а затем создайте базу данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-117">Use **Model First** to define your model using boxes and lines and then generate a database.</span></span>](~/ef6/modeling/designer/workflows/model-first.md)   |
| <span data-ttu-id="3fd42-118">**Мне требуется доступ к существующей базе данных**</span><span class="sxs-lookup"><span data-stu-id="3fd42-118">**I need to access an existing database**</span></span> | [<span data-ttu-id="3fd42-119">Используйте **Code First** для создания модели на основе кода, которая сопоставляется с существующей базой данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-119">Use **Code First** to create a code based model that maps to an existing database.</span></span>](~/ef6/modeling/code-first/workflows/existing-database.md) | [<span data-ttu-id="3fd42-120">Используйте **Database First** для создания модели полей и строк, которая сопоставляется с существующей базой данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-120">Use **Database First** to create a boxes and lines model that maps to an existing database.</span></span>](~/ef6/modeling/designer/workflows/database-first.md) |

### <a name="watch-the-video-what-ef-workflow-should-i-use"></a><span data-ttu-id="3fd42-121">Просмотрите видео о выборе подходящего рабочего процесса EF.</span><span class="sxs-lookup"><span data-stu-id="3fd42-121">Watch the video: What EF workflow should I use?</span></span>

<span data-ttu-id="3fd42-122">В этом коротком видеоролике объясняются различия рабочих процессов и приводятся советы по выбору оптимального процесса.</span><span class="sxs-lookup"><span data-stu-id="3fd42-122">This short video explains the differences, and how to find the one that is right for you.</span></span>

<span data-ttu-id="3fd42-123">**Представляет**: [Роуэн Миллер (Rowan Miller)](http://romiller.com/)</span><span class="sxs-lookup"><span data-stu-id="3fd42-123">**Presented By**: [Rowan Miller](http://romiller.com/)</span></span>

<span data-ttu-id="3fd42-124">![WhichWorkflow_Thumb](../media/whichworkflow-thumb.png) [WMV](http://download.microsoft.com/download/8/F/8/8F81F4CD-3678-4229-8D79-0C63FFA3C595/HDI_ITPro_Technet_winvideo_ChoseYourWorkflow.wmv) | [MP4](http://download.microsoft.com/download/8/F/8/8F81F4CD-3678-4229-8D79-0C63FFA3C595/HDI_ITPro_Technet_mp4video_ChoseYourWorkflow.m4v) | [WMV (ZIP)](http://download.microsoft.com/download/8/F/8/8F81F4CD-3678-4229-8D79-0C63FFA3C595/HDI_ITPro_Technet_winvideo_ChoseYourWorkflow.zip)</span><span class="sxs-lookup"><span data-stu-id="3fd42-124">![WhichWorkflow_Thumb](../media/whichworkflow-thumb.png) [WMV](http://download.microsoft.com/download/8/F/8/8F81F4CD-3678-4229-8D79-0C63FFA3C595/HDI_ITPro_Technet_winvideo_ChoseYourWorkflow.wmv) | [MP4](http://download.microsoft.com/download/8/F/8/8F81F4CD-3678-4229-8D79-0C63FFA3C595/HDI_ITPro_Technet_mp4video_ChoseYourWorkflow.m4v) | [WMV (ZIP)](http://download.microsoft.com/download/8/F/8/8F81F4CD-3678-4229-8D79-0C63FFA3C595/HDI_ITPro_Technet_winvideo_ChoseYourWorkflow.zip)</span></span>

<span data-ttu-id="3fd42-125">Если после просмотра видеоролика вы все еще не можете решить, что будете использовать — Entity Framework Designer или Code First, — изучите оба подхода.</span><span class="sxs-lookup"><span data-stu-id="3fd42-125">If after watching the video you still don't feel comfortable deciding if you want to use the EF Designer or Code First, learn both!</span></span>

## <a name="a-look-under-the-hood"></a><span data-ttu-id="3fd42-126">Взгляд изнутри</span><span class="sxs-lookup"><span data-stu-id="3fd42-126">A look under the hood</span></span>

<span data-ttu-id="3fd42-127">Независимо от того, используете ли вы Code First или Entity Framework Designer, модель EF всегда состоит из нескольких компонентов.</span><span class="sxs-lookup"><span data-stu-id="3fd42-127">Regardless of whether you use Code First or the EF Designer, an EF model always has several components:</span></span>

- <span data-ttu-id="3fd42-128">Объекты предметной области приложения или сами типы сущностей.</span><span class="sxs-lookup"><span data-stu-id="3fd42-128">The application's domain objects or entity types themselves.</span></span> <span data-ttu-id="3fd42-129">Этот уровень часто называют уровнем объектов.</span><span class="sxs-lookup"><span data-stu-id="3fd42-129">This is often referred to as the object layer</span></span>

- <span data-ttu-id="3fd42-130">Концептуальная модель, состоящая из соответствующих предметной области типов сущностей и связей, описываемых с помощью [модели EDM](~/ef6/resources/glossary.md#entity-data-model).</span><span class="sxs-lookup"><span data-stu-id="3fd42-130">A conceptual model consisting of domain-specific entity types and relationships, described using the [Entity Data Model](~/ef6/resources/glossary.md#entity-data-model).</span></span> <span data-ttu-id="3fd42-131">Этот уровень часто указывается с буквой C, означающей _conceptual (концептуальный)_.</span><span class="sxs-lookup"><span data-stu-id="3fd42-131">This layer is often referred to with the letter "C", for _conceptual_.</span></span>

- <span data-ttu-id="3fd42-132">Модель хранения, представляющая таблицы, столбцы и связи, как определено в базе данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-132">A storage model representing tables, columns and relationships as defined in the database.</span></span> <span data-ttu-id="3fd42-133">Этот уровень часто указывается с буквой S, означающей _S (хранение)_.</span><span class="sxs-lookup"><span data-stu-id="3fd42-133">This layer is often referred to with the later "S", for _storage_.</span></span>  

- <span data-ttu-id="3fd42-134">Сопоставление концептуальной модели со схемой базы данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-134">A mapping between the conceptual model and the database schema.</span></span> <span data-ttu-id="3fd42-135">Это сопоставление, часто называют сопоставлением C-S.</span><span class="sxs-lookup"><span data-stu-id="3fd42-135">This mapping is often referred to as "C-S" mapping.</span></span>

<span data-ttu-id="3fd42-136">Подсистема сопоставления EF использует сопоставление C-S для преобразования операций с сущностями (создание, чтение, обновление и удаление) в эквивалентные операции для таблиц в базе данных.</span><span class="sxs-lookup"><span data-stu-id="3fd42-136">EF's mapping engine leverages the "C-S" mapping to transform operations against entities - such as create, read, update, and delete - into equivalent operations against tables in the database.</span></span>

<span data-ttu-id="3fd42-137">Сопоставление концептуальной модели и объектов приложения часто называют сопоставлением O-C.</span><span class="sxs-lookup"><span data-stu-id="3fd42-137">The mapping between the conceptual model and the application's objects is often referred to as "O-C" mapping.</span></span> <span data-ttu-id="3fd42-138">По сравнению с сопоставлением C-S сопоставление O-C является неявным и поддерживающим тип "один к одному": сущности, свойства и связи, определенные в концептуальной модели, необходимы для соответствия фигурам и типам объектов .NET.</span><span class="sxs-lookup"><span data-stu-id="3fd42-138">Compared to the "C-S" mapping, "O-C" mapping is implicit and one-to-one: entities, properties and relationships defined in the conceptual model are required to match the shapes and types of the .NET objects.</span></span> <span data-ttu-id="3fd42-139">В EF4 и более поздних версиях уровень объектов может состоять из простых объектов со свойствами без зависимостей от EF.</span><span class="sxs-lookup"><span data-stu-id="3fd42-139">From EF4 and beyond, the objects layer can be composed of simple objects with properties without any dependencies on EF.</span></span> <span data-ttu-id="3fd42-140">Они обычно называются традиционными объектами среды CLR (POCO), и сопоставление типов и свойств выполняется на основе соглашений о соответствии имен.</span><span class="sxs-lookup"><span data-stu-id="3fd42-140">These are usually referred to as Plain-Old CLR Objects (POCO) and mapping of types and properties is performed base on name matching conventions.</span></span> <span data-ttu-id="3fd42-141">Ранее в EF 3.5 существовали определенные ограничения для уровня объектов, например, сущности должны быть производными от класса EntityObject и должны использовать атрибуты EF для реализации сопоставления O-C.</span><span class="sxs-lookup"><span data-stu-id="3fd42-141">Previously, in EF 3.5 there were specific restrictions for the object layer, like entities having to derive from the EntityObject class and having to carry EF attributes to implement the "O-C" mapping.</span></span>
