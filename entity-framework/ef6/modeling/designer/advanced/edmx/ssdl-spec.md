---
title: Спецификация языка SSDL — EF6
description: Спецификация языка SSDL в Entity Framework 6
author: divega
ms.date: 10/23/2016
ms.assetid: a4af4b1a-40f4-48cc-b2e0-fa8f5d9d5419
uid: ef6/modeling/designer/advanced/edmx/ssdl-spec
ms.openlocfilehash: ab50579649c2e1b19d113cd127e52be995516e27
ms.sourcegitcommit: 7c3939504bb9da3f46bea3443638b808c04227c2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2020
ms.locfileid: "89620596"
---
# <a name="ssdl-specification"></a>Спецификация SSDL
SSDL представляет собой язык на основе XML, на котором описывается модель хранения в приложениях Entity Framework.

В приложении Entity Framework метаданные модели хранения загружаются из SSDL-файла (написанного на языке SSDL) в экземпляр класса System. Data. Metadata. EDM. StoreItemCollection и доступны с помощью методов в классе System. Data. Metadata. EDM. MetadataWorkspace. Entity Framework использует метаданные модели хранения для преобразования запросов к концептуальной модели для хранения команд, относящихся к хранению.

Entity Framework Designer (конструктор EF) сохраняет сведения о модели хранения в EDMX-файле во время разработки. Во время сборки Entity Designer использует сведения в EDMX-файле, чтобы создать SSDL-файл, необходимый для Entity Framework во время выполнения.

Версии языка SSDL различаются по пространствам имен XML.

| Версия на языке SSDL | Пространство имен XML                                     |
|:-------------|:--------------------------------------------------|
| SSDL v1      | https://schemas.microsoft.com/ado/2006/04/edm/ssdl |
| SSDL v2      | https://schemas.microsoft.com/ado/2009/02/edm/ssdl |
| SSDL v3      | https://schemas.microsoft.com/ado/2009/11/edm/ssdl |

## <a name="association-element-ssdl"></a>Элемент Association (SSDL)

Элемент **Association** в языке SSDL указывает столбцы таблицы, которые участвуют в ограничении внешнего ключа в базовой базе данных. Два обязательных дочерних элемента End указывают таблицы в концах сопоставления и кратность для каждого из них. Дополнительный элемент ReferentialConstraint указывает основной и зависимый концы сопоставления и участвующие столбцы. Если элемент **ReferentialConstraint** отсутствует, для указания сопоставлений столбцов для ассоциации необходимо использовать элемент AssociationSetMapping.

Элемент **Association** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один)
-   End (ровно два)
-   ReferentialConstraint (ноль или один)
-   Элементы annotation (ноль или больше)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **Association** .

| Имя атрибута | Обязательный | Значение                                                                            |
|:---------------|:------------|:---------------------------------------------------------------------------------|
| **имя**;       | Да         | Имя соответствующего ограничения внешнего ключа в основной базе данных. |

> [!NOTE]
> К элементу **Association** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **Association** , использующий элемент **ReferentialConstraint** для указания столбцов, участвующих в ограничении внешнего ключа **FK \_ кустомерордерс** :

``` xml
 <Association Name="FK_CustomerOrders">
   <End Role="Customers"
        Type="ExampleModel.Store.Customers" Multiplicity="1">
     <OnDelete Action="Cascade" />
   </End>
   <End Role="Orders"
        Type="ExampleModel.Store.Orders" Multiplicity="*" />
   <ReferentialConstraint>
     <Principal Role="Customers">
       <PropertyRef Name="CustomerId" />
     </Principal>
     <Dependent Role="Orders">
       <PropertyRef Name="CustomerId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```

## <a name="associationset-element-ssdl"></a>Элемент AssociationSet (SSDL)

Элемент **AssociationSet** в языке SSDL представляет ограничение внешнего ключа между двумя таблицами в базовой базе данных. Столбцы таблицы, принимающие участие в ограничении внешнего ключа, указаны в элементе Association. Элемент **Association** , соответствующий заданному элементу **AssociationSet** , задается в атрибуте **Association** элемента **AssociationSet** .

Наборы ассоциаций SSDL сопоставляются с наборами ассоциаций CSDL с помощью элемента AssociationSetMapping. Однако если сопоставление CSDL для заданного набора ассоциаций CSDL определено с помощью элемента ReferentialConstraint, соответствующий элемент **AssociationSetMapping** не требуется. В этом случае, если имеется элемент **AssociationSetMapping** , определяемые им сопоставления будут переопределены элементом **ReferentialConstraint** .

Элемент **AssociationSet** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один)
-   End (ноль или два)
-   Элементы annotation (ноль или больше)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **AssociationSet** .

| Имя атрибута  | Обязательный | Значение                                                                                                |
|:----------------|:------------|:-----------------------------------------------------------------------------------------------------|
| **имя**;        | Да         | Имя ограничения внешнего ключа, представленное набором ассоциаций.                          |
| **Взаимосвязь** | Да         | Имя ассоциации, определяющее столбцы, которые участвуют в ограничении внешнего ключа. |

> [!NOTE]
> К элементу **AssociationSet** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **AssociationSet** , представляющий `FK_CustomerOrders` ограничение внешнего ключа в базовой базе данных:

``` xml
 <AssociationSet Name="FK_CustomerOrders"
                 Association="ExampleModel.Store.FK_CustomerOrders">
   <End Role="Customers" EntitySet="Customers" />
   <End Role="Orders" EntitySet="Orders" />
 </AssociationSet>
```

## <a name="collectiontype-element-ssdl"></a>Элемент CollectionType (SSDL)

Элемент **CollectionType** в языке SSDL указывает, что возвращаемый функцией тип является коллекцией. Элемент **CollectionType** является дочерним по отношению к элементу ReturnType. Тип коллекции задается с помощью дочернего элемента RowType:

> [!NOTE]
> К элементу **CollectionType** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показана функция, которая использует элемент **CollectionType** для указания того, что функция возвращает коллекцию строк.

``` xml
   <Function Name="GetProducts" IsComposable="true" Schema="dbo">
     <ReturnType>
       <CollectionType>
         <RowType>
           <Property Name="ProductID" Type="int" Nullable="false" />
           <Property Name="CategoryID" Type="bigint" Nullable="false" />
           <Property Name="ProductName" Type="nvarchar" MaxLength="40" Nullable="false" />
           <Property Name="UnitPrice" Type="money" />
           <Property Name="Discontinued" Type="bit" />
         </RowType>
       </CollectionType>
     </ReturnType>
   </Function>
```

## <a name="commandtext-element-ssdl"></a>Элемент CommandText (SSDL)

Элемент **CommandText** в языке SSDL является дочерним элементом элемента Function, который позволяет определить инструкцию SQL, выполняемую в базе данных. Элемент **CommandText** позволяет добавлять функции, аналогичные хранимым процедурам в базе данных, но вы определяете элемент **CommandText** в модели хранения.

Элемент **CommandText** не может иметь дочерние элементы. Тело элемента **CommandText** должно быть допустимой инструкцией SQL для базовой базы данных.

К элементу **CommandText** не применяются атрибуты.

### <a name="example"></a>Пример

В следующем примере показан элемент **Function** с дочерним элементом **CommandText** . Предоставьте функцию **упдатепродуктинордер** как метод в контексте ObjectContext, импортировав его в концептуальную модель.  

``` xml
 <Function Name="UpdateProductInOrder" IsComposable="false">
   <CommandText>
     UPDATE Orders
     SET ProductId = @productId
     WHERE OrderId = @orderId;
   </CommandText>
   <Parameter Name="productId"
              Mode="In"
              Type="int"/>
   <Parameter Name="orderId"
              Mode="In"
              Type="int"/>
 </Function>
```

## <a name="definingquery-element-ssdl"></a>Элемент DefiningQuery (SSDL)

Элемент **DefiningQuery** в языке SSDL позволяет выполнять инструкцию SQL непосредственно в основной базе данных. Элемент **DefiningQuery** обычно используется как представление базы данных, но представление определяется в модели хранения, а не в базе данных. Представление, определенное в элементе **DefiningQuery** , может быть сопоставлено с типом сущности в концептуальной модели через элемент EntitySetMapping. Такие сопоставления предназначены только для чтения.  

В следующем синтаксисе языка SSDL показано объявление **набора EntitySet** , за которым следует элемент **DefiningQuery** , содержащий запрос, используемый для получения представления.

``` xml
 <Schema>
     <EntitySet Name="Tables" EntityType="Self.STable">
         <DefiningQuery>
           SELECT  TABLE_CATALOG,
                   'test' as TABLE_SCHEMA,
                   TABLE_NAME
           FROM    INFORMATION_SCHEMA.TABLES
         </DefiningQuery>
     </EntitySet>
 </Schema>
```

Хранимые процедуры можно использовать в Entity Framework для включения сценариев чтения и записи для представлений.В качестве базовой таблицы для получения данных и обработки изменений хранимыми процедурами можно использовать либо представление источника данных, либо представление Entity SQL.

Элемент **DefiningQuery** можно использовать для назначения Microsoft SQL Server Compact 3,5. Хотя SQL Server Compact 3,5 не поддерживает хранимые процедуры, можно реализовать аналогичные функции с помощью элемента **DefiningQuery** . Этот элемент также может быть полезен при создании хранимых процедур для преодоления несоответствий между типами данных, используемых в языке программирования, и типами данных источника данных. Можно написать параметр **DefiningQuery** , который принимает определенный набор параметров, а затем вызывает хранимую процедуру с другим набором параметров, например хранимую процедуру, которая удаляет данные.

## <a name="dependent-element-ssdl"></a>Элемент Dependent (SSDL)

**Зависимый** элемент в языке SSDL является дочерним элементом для элемента ReferentialConstraint, определяющего зависимый конец ограничения внешнего ключа (также называемого ссылочным ограничением). **Зависимый** элемент указывает столбец (или столбцы) в таблице, ссылающейся на первичный ключевой столбец (или столбцы). Элементы **PropertyRef** указывают, на какие столбцы ссылаются. Элемент Principal задает столбцы первичного ключа, на которые ссылаются столбцы, указанные в **зависимом** элементе.

**Зависимый** элемент может иметь следующие дочерние элементы (в указанном порядке):

-   PropertyRef (один или несколько)
-   Элементы annotation (ноль или больше)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к **зависимому** элементу.

| Имя атрибута | Обязательный | Значение                                                                                                                                                       |
|:---------------|:------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Роль**       | Да         | То же значение, что и для атрибута **Role** (если используется) соответствующего конечного элемента; в противном случае — имя таблицы, содержащей ссылающийся столбец. |

> [!NOTE]
> К **зависимому** элементу можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент Association, использующий элемент **ReferentialConstraint** для указания столбцов, участвующих в ограничении внешнего ключа **FK \_ кустомерордерс** . **Зависимый** элемент указывает столбец **CustomerID** таблицы **Order** как зависимый конец ограничения.

``` xml
 <Association Name="FK_CustomerOrders">
   <End Role="Customers"
        Type="ExampleModel.Store.Customers" Multiplicity="1">
     <OnDelete Action="Cascade" />
   </End>
   <End Role="Orders"
        Type="ExampleModel.Store.Orders" Multiplicity="*" />
   <ReferentialConstraint>
     <Principal Role="Customers">
       <PropertyRef Name="CustomerId" />
     </Principal>
     <Dependent Role="Orders">
       <PropertyRef Name="CustomerId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```

## <a name="documentation-element-ssdl"></a>Элемент Documentation (SSDL)

Элемент **Documentation** в языке SSDL может использоваться для предоставления сведений об объекте, определенном в родительском элементе.

Элемент **Documentation** может иметь следующие дочерние элементы (в указанном порядке):

-   **Сводка**: краткое описание родительского элемента. (ноль или один элемент)
-   **Лонгдескриптион**: расширенное описание родительского элемента. (ноль или один элемент)

### <a name="applicable-attributes"></a>Применимые атрибуты

К элементу **Documentation** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **Documentation** в качестве дочернего элемента элемента EntityType.

``` xml
 <EntityType Name="Customers">
   <Documentation>
     <Summary>Summary here.</Summary>
     <LongDescription>Long description here.</LongDescription>
   </Documentation>
   <Key>
     <PropertyRef Name="CustomerId" />
   </Key>
   <Property Name="CustomerId" Type="int" Nullable="false" />
   <Property Name="Name" Type="nvarchar(max)" Nullable="false" />
 </EntityType>
```

## <a name="end-element-ssdl"></a>Элемент End (SSDL)

Элемент **End** в языке SSDL указывает таблицу и количество строк в одном конце ограничения внешнего ключа в базовой базе данных. Элемент **End** может быть дочерним по отношению к элементу Association или элементу AssociationSet. В каждом из этих случаев дочерние элементы и применимые атрибуты будут различными.

### <a name="end-element-as-a-child-of-the-association-element"></a>Элемент End как дочерний по отношению к элементу Association

Элемент **End** (в качестве дочернего элемента **ассоциации** ) указывает таблицу и число строк в конце ограничения внешнего ключа с атрибутами **тип** и **кратность** соответственно. Элементы ограничения внешнего ключа определяются как часть ассоциации SSDL. Ассоциация SSDL должна содержать ровно два элемента.

Элемент **End** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один элемент)
-   OnDelete (ноль или один элемент)
-   Элементы Annotation (ноль или более элементов)

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **End** , если он является дочерним для элемента **Association** .

| Имя атрибута   | Обязательный | Значение                                                                                                                                                                                                                                                                                                                                                                                      |
|:-----------------|:------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Тип**         | Да         | Полное имя набора сущностей языка SSDL на конце ограничения внешнего ключа.                                                                                                                                                                                                                                                                                          |
| **Роль**         | Нет          | Значение атрибута **Role** либо в основном, либо в зависимом элементе соответствующего элемента ReferentialConstraint (если используется).                                                                                                                                                                                                                                             |
| **Кратность** | Да         | **1**, **0.. 1**или в **\*** зависимости от количества строк, которые могут находиться в конце ограничения внешнего ключа. <br/> значение **1** указывает, что в конце ограничения внешнего ключа существует ровно одна строка. <br/> **0.. 1** указывает, что в окончании ограничения внешнего ключа находится ноль или одна строка. <br/> **\*** Указывает, что в окончании ограничения внешнего ключа существует ноль, одна или несколько строк. |

> [!NOTE]
> К **конечному** элементу можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

#### <a name="example"></a>Пример

В следующем примере показан элемент **Association** , определяющий ограничение внешнего ключа **FK \_ кустомерордерс** . Значения **кратности** , заданные для каждого **конечного** элемента, указывают на то, что многие строки в таблице **Orders** можно связать со строкой в таблице **Customers** , но только одну строку в таблице **Customers** можно связать со строкой в таблице **Orders** . Кроме того, элемент **OnDelete** указывает, что все строки в таблице **Orders** , ссылающиеся на определенную строку в таблице **Customers** , будут удалены при удалении строки в таблице **Customers** .

``` xml
 <Association Name="FK_CustomerOrders">
   <End Role="Customers"
        Type="ExampleModel.Store.Customers" Multiplicity="1">
     <OnDelete Action="Cascade" />
   </End>
   <End Role="Orders"
        Type="ExampleModel.Store.Orders" Multiplicity="*" />
   <ReferentialConstraint>
     <Principal Role="Customers">
       <PropertyRef Name="CustomerId" />
     </Principal>
     <Dependent Role="Orders">
       <PropertyRef Name="CustomerId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```

### <a name="end-element-as-a-child-of-the-associationset-element"></a>Элемент End как дочерний по отношению к элементу AssociationSet

Элемент **End** (как дочерний элемент набора **AssociationSet** ) указывает таблицу в одном конце ограничения внешнего ключа в базовой базе данных.

Элемент **End** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один)
-   Элементы annotation (ноль или больше)

#### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **End** , если он является дочерним для элемента **AssociationSet** .

| Имя атрибута | Обязательный | Значение                                                                                                                  |
|:---------------|:------------|:-----------------------------------------------------------------------------------------------------------------------|
| **EntitySet**  | Да         | Имя набора сущностей языка SSDL на конце ограничения внешнего ключа.                                      |
| **Роль**       | Нет          | Значение одного из атрибутов **роли** , заданных для одного **конечного** элемента соответствующего элемента Association. |

> [!NOTE]
> К **конечному** элементу можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

#### <a name="example"></a>Пример

В следующем примере показан элемент **EntityContainer** с элементом **AssociationSet** с двумя элементами **End** :

``` xml
 <EntityContainer Name="ExampleModelStoreContainer">
   <EntitySet Name="Customers"
              EntityType="ExampleModel.Store.Customers"
              Schema="dbo" />
   <EntitySet Name="Orders"
              EntityType="ExampleModel.Store.Orders"
              Schema="dbo" />
   <AssociationSet Name="FK_CustomerOrders"
                   Association="ExampleModel.Store.FK_CustomerOrders">
     <End Role="Customers" EntitySet="Customers" />
     <End Role="Orders" EntitySet="Orders" />
   </AssociationSet>
 </EntityContainer>
```

## <a name="entitycontainer-element-ssdl"></a>Элемент EntityContainer (SSDL)

Элемент **EntityContainer** в языке SSDL описывает структуру базового источника данных в Entity Framework приложении: наборы сущностей SSDL (определенные в элементах EntitySet) представляют таблицы в базе данных, типы сущностей SSDL (определенные в элементах EntityType) представляют строки в таблице, а наборы ассоциаций (определенные в элементах AssociationSet) представляют ограничения внешнего ключа в базе данных. Контейнер сущностей модели хранения сопоставляется с контейнером сущностей концептуальной модели посредством элемента EntityContainerMapping.

Элемент **EntityContainer** может иметь один или несколько элементов документации. Если элемент **Documentation** присутствует, он должен предшествовать всем остальным дочерним элементам.

Элемент **EntityContainer** может иметь ноль или более следующих дочерних элементов (в указанном порядке):

-   EntitySet
-   AssociationSet
-   Элементы Annotation

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **EntityContainer** .

| Имя атрибута | Обязательный | Значение                                                                   |
|:---------------|:------------|:------------------------------------------------------------------------|
| **имя**;       | Да         | Имя контейнера сущностей. Это имя не может содержать точек (.). |

> [!NOTE]
> К элементу **EntityContainer** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **EntityContainer** , определяющий два набора сущностей и один набор ассоциаций. Обратите внимание, что тип сущности и имена типов ассоциаций определяются именем пространства имен концептуальной модели.

``` xml
 <EntityContainer Name="ExampleModelStoreContainer">
   <EntitySet Name="Customers"
              EntityType="ExampleModel.Store.Customers"
              Schema="dbo" />
   <EntitySet Name="Orders"
              EntityType="ExampleModel.Store.Orders"
              Schema="dbo" />
   <AssociationSet Name="FK_CustomerOrders"
                   Association="ExampleModel.Store.FK_CustomerOrders">
     <End Role="Customers" EntitySet="Customers" />
     <End Role="Orders" EntitySet="Orders" />
   </AssociationSet>
 </EntityContainer>
```

## <a name="entityset-element-ssdl"></a>Элемент EntitySet (SSDL)

Элемент **EntitySet** в языке SSDL представляет таблицу или представление в базовой базе данных. Элемент EntityType в языке SSDL представляет строку в таблице или представлении. Атрибут **EntityType** элемента **EntitySet** указывает конкретный тип сущности SSDL, представляющий строки в наборе сущностей SSDL. Сопоставление между типом сущности CSDL и типом сущностиSSDL указано в элементе EntitySetMapping.

Элемент **EntitySet** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один элемент)
-   DefiningQuery (ноль или один элемент)
-   Элементы Annotation

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **EntitySet** .

> [!NOTE]
> Некоторые атрибуты (не перечислены здесь) могут быть дополнены псевдонимом **хранилища** . Эти атрибуты используются мастером обновления модели в ходе обновления модели.

| Имя атрибута | Обязательный | Значение                                                                                    |
|:---------------|:------------|:-----------------------------------------------------------------------------------------|
| **имя**;       | Да         | Имя набора сущностей.                                                              |
| **EntityType** | Да         | Полное имя типа сущности, для которого набор сущностей содержит экземпляры. |
| **Схема**     | Нет          | Схема базы данных.                                                                     |
| **Таблица**      | Нет          | Таблица базы данных.                                                                      |

> [!NOTE]
> К элементу **EntitySet** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **EntityContainer** , который имеет два элемента **EntitySet** и один элемент **AssociationSet** :

``` xml
 <EntityContainer Name="ExampleModelStoreContainer">
   <EntitySet Name="Customers"
              EntityType="ExampleModel.Store.Customers"
              Schema="dbo" />
   <EntitySet Name="Orders"
              EntityType="ExampleModel.Store.Orders"
              Schema="dbo" />
   <AssociationSet Name="FK_CustomerOrders"
                   Association="ExampleModel.Store.FK_CustomerOrders">
     <End Role="Customers" EntitySet="Customers" />
     <End Role="Orders" EntitySet="Orders" />
   </AssociationSet>
 </EntityContainer>
```

## <a name="entitytype-element-ssdl"></a>Элемент EntityType (SSDL)

Элемент **EntityType** в языке SSDL представляет строку в таблице или представлении базовой базы данных. Элемент EntitySet в языке SSDL представляет таблицу или представление, в котором появляются строки. Атрибут **EntityType** элемента **EntitySet** указывает конкретный тип сущности SSDL, представляющий строки в наборе сущностей SSDL. Сопоставление между типом сущности SSDL и типом сущности CSDL указано в элементе EntityTypeMapping.

Элемент **EntityType** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один элемент)
-   Key (ноль или один элемент)
-   Элементы Annotation

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **EntityType** .

| Имя атрибута | Обязательный | Значение                                                                                                                                                                  |
|:---------------|:------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **имя**;       | Да         | Имя типа сущности. Данное значение обычно совпадает с именем таблицы, в которой тип сущности представляет строку. Это значение не может содержать точек (.). |

> [!NOTE]
> К элементу **EntityType** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **EntityType** с двумя свойствами:

``` xml
 <EntityType Name="Customers">
   <Documentation>
     <Summary>Summary here.</Summary>
     <LongDescription>Long description here.</LongDescription>
   </Documentation>
   <Key>
     <PropertyRef Name="CustomerId" />
   </Key>
   <Property Name="CustomerId" Type="int" Nullable="false" />
   <Property Name="Name" Type="nvarchar(max)" Nullable="false" />
 </EntityType>
```

## <a name="function-element-ssdl"></a>Элемент Function (SSDL)

Элемент **Function** в языке SSDL указывает хранимую процедуру, которая существует в базовой базе данных.

Элемент **Function** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один)
-   Параметр (ноль или более)
-   CommandText (ноль или один)
-   ReturnType (ноль или более)
-   Элементы annotation (ноль или больше)

Тип возвращаемого значения для функции должен быть указан либо как элемент **ReturnType** , либо как атрибут **ReturnType** (см. ниже), но не оба.

Хранимая процедура, указанная в модели хранения, может быть импортирована в концептуальную модель приложения. Дополнительные сведения см. в разделе [запросы с помощью хранимых процедур](xref:ef6/modeling/designer/stored-procedures/query). Элемент **Function** также может использоваться для определения пользовательских функций в модели хранения.  

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **Function** .

> [!NOTE]
> Некоторые атрибуты (не перечислены здесь) могут быть дополнены псевдонимом **хранилища** . Эти атрибуты используются мастером обновления модели в ходе обновления модели.

| Имя атрибута             | Обязательный | Значение                                                                                                                                                                                                              |
|:---------------------------|:------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **имя**;                   | Да         | Имя хранимой процедуры.                                                                                                                                                                                  |
| **ReturnType**             | Нет          | Возвращаемый тип хранимой процедуры.                                                                                                                                                                           |
| **Aggregate**              | Нет          | Значение **true** , если хранимая процедура возвращает статистическое значение; в противном случае — **false**.                                                                                                                                  |
| **BuiltIn**                | Нет          | **Значение true** , если функция является встроенной функцией<sup>1</sup> ; в противном случае — **false**.                                                                                                                                  |
| **StoreFunctionName**      | Нет          | Имя хранимой процедуры.                                                                                                                                                                                  |
| **NiladicFunction**        | Нет          | **Значение true** , если функция является функцией без параметров<sup>2</sup> ; В противном случае — **значение false** .                                                                                                                                   |
| **IsComposable**           | Нет          | **Значение true** , если функция является составной функцией<sup>3</sup> ; В противном случае — **значение false** .                                                                                                                                |
| **параметертипесемантикс** | Нет          | Перечисление, определяющее семантику типа, которая используется для разрешения перегрузок функций. Перечисление определено в манифесте поставщика для определения функции. Значение по умолчанию — **алловимплиЦитконверсион**. |
| **Схема**                 | Нет          | Имя схемы, в которой определена хранимая процедура.                                                                                                                                                   |

<sup>1</sup> встроенная функция — это функция, определенная в базе данных. Сведения о функциях, определенных в модели хранения, см. в разделе Элемент CommandText (SSDL).

<sup>2</sup> функция без параметров не принимает никаких параметров и, при вызове, не требует круглых скобок.

<sup>3</sup> две функции являются составными, если выходные данные одной функции могут быть входными данными для другой функции.

> [!NOTE]
> К элементу **функции** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **Function** , соответствующий хранимой процедуре **упдатеордеркуантити** . Хранимая процедура принимает два параметра и не возвращает значение.

``` xml
 <Function Name="UpdateOrderQuantity"
           Aggregate="false"
           BuiltIn="false"
           NiladicFunction="false"
           IsComposable="false"
           ParameterTypeSemantics="AllowImplicitConversion"
           Schema="dbo">
   <Parameter Name="orderId" Type="int" Mode="In" />
   <Parameter Name="newQuantity" Type="int" Mode="In" />
 </Function>
```

## <a name="key-element-ssdl"></a>Элемент Key (SSDL)

Элемент **Key** в языке SSDL представляет первичный ключ таблицы в базовой базе данных. **Key** — это дочерний элемент элемента EntityType, который представляет строку в таблице. Первичный ключ определяется в элементе **Key** путем ссылки на один или несколько элементов свойств, определенных для элемента **EntityType** .

Элемент **Key** может иметь следующие дочерние элементы (в указанном порядке):

-   PropertyRef (один или несколько)
-   Элементы Annotation

К элементу **Key** не применяются атрибуты.

### <a name="example"></a>Пример

В следующем примере показан элемент **EntityType** с ключом, который ссылается на одно свойство:

``` xml
 <EntityType Name="Customers">
   <Documentation>
     <Summary>Summary here.</Summary>
     <LongDescription>Long description here.</LongDescription>
   </Documentation>
   <Key>
     <PropertyRef Name="CustomerId" />
   </Key>
   <Property Name="CustomerId" Type="int" Nullable="false" />
   <Property Name="Name" Type="nvarchar(max)" Nullable="false" />
 </EntityType>
```

## <a name="ondelete-element-ssdl"></a>Элемент OnDelete (SSDL)

Элемент **OnDelete** в языке SSDL отражает поведение базы данных при удалении строки, участвующей в ограничении внешнего ключа. Если для действия задано значение **CASCADE**, то строки, ссылающиеся на удаляемую строку, также будут удалены. Если для действия задано значение **нет**, то строки, ссылающиеся на удаляемую строку, также не удаляются. Элемент **OnDelete** является дочерним элементом конечного элемента.

Элемент **OnDelete** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один)
-   Элементы annotation (ноль или больше)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **OnDelete** .

| Имя атрибута | Обязательный | Значение                                                                                               |
|:---------------|:------------|:----------------------------------------------------------------------------------------------------|
| **Действие**     | Да         | **CASCADE** или **None**. ( **Ограничение** по значению допустимо, но имеет то же поведение, что и **None**.) |

> [!NOTE]
> К элементу **OnDelete** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **Association** , определяющий ограничение внешнего ключа **FK \_ кустомерордерс** . Элемент **OnDelete** указывает, что все строки в таблице **Orders** , ссылающиеся на определенную строку в таблице **Customers** , будут удалены при удалении строки в таблице **Customers** .

``` xml
 <Association Name="FK_CustomerOrders">
   <End Role="Customers"
        Type="ExampleModel.Store.Customers" Multiplicity="1">
     <OnDelete Action="Cascade" />
   </End>
   <End Role="Orders"
        Type="ExampleModel.Store.Orders" Multiplicity="*" />
   <ReferentialConstraint>
     <Principal Role="Customers">
       <PropertyRef Name="CustomerId" />
     </Principal>
     <Dependent Role="Orders">
       <PropertyRef Name="CustomerId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```

## <a name="parameter-element-ssdl"></a>Элемент Parameter (SSDL)

Элемент **Parameter** в языке SSDL является дочерним по отношению к элементу Function, который указывает параметры для хранимой процедуры в базе данных.

Элемент **Parameter** может иметь следующие дочерние элементы (в указанном порядке):

-   Documentation (ноль или один)
-   Элементы annotation (ноль или больше)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **Parameter** .

| Имя атрибута | Обязательный | Значение                                                                                                                                                                                                                           |
|:---------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **имя**;       | Да         | Имя параметра.                                                                                                                                                                                                      |
| **Тип**       | Да         | Тип параметра.                                                                                                                                                                                                             |
| **Режим**       | Нет          | **В**, **out**или **InOut** в зависимости от того, является ли параметр входным, выходным или входным или выходным.                                                                                                                |
| **MaxLength**  | Нет          | Максимальная длина параметра.                                                                                                                                                                                            |
| **Точность**  | Нет          | Точность параметра.                                                                                                                                                                                                 |
| **Масштаб**      | Нет          | Масштаб параметра.                                                                                                                                                                                                     |
| **SRID**       | Нет          | Идентификатор пространственной системной ссылки. Допустимо только для параметров пространственных типов. Дополнительные сведения см. в разделе [SRID](https://en.wikipedia.org/wiki/SRID) and [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx). |

> [!NOTE]
> К элементу **Parameter** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **Function** , имеющий два элемента **параметров** , задающих входные параметры:

``` xml
 <Function Name="UpdateOrderQuantity"
           Aggregate="false"
           BuiltIn="false"
           NiladicFunction="false"
           IsComposable="false"
           ParameterTypeSemantics="AllowImplicitConversion"
           Schema="dbo">
   <Parameter Name="orderId" Type="int" Mode="In" />
   <Parameter Name="newQuantity" Type="int" Mode="In" />
 </Function>
```

## <a name="principal-element-ssdl"></a>Элемент Principal (SSDL)

**Основной** элемент в языке SSDL является дочерним элементом для элемента ReferentialConstraint, который определяет основной элемент ограничения внешнего ключа (также называемого ссылочным ограничением). Элемент **Principal** указывает первичный ключевой столбец (или столбцы) в таблице, на которую ссылается другой столбец (или столбцы). Элементы **PropertyRef** указывают, на какие столбцы ссылаются. Зависимый элемент указывает столбцы, которые ссылаются на первичные ключевые столбцы, указанные в элементе **Principal** .

Элемент **Principal** может иметь следующие дочерние элементы (в указанном порядке):

-   PropertyRef (один или несколько)
-   Элементы annotation (ноль или больше)

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к **основному** элементу.

| Имя атрибута | Обязательный | Значение                                                                                                                                                      |
|:---------------|:------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Роль**       | Да         | То же значение, что и для атрибута **Role** (если используется) соответствующего конечного элемента; в противном случае — имя таблицы, содержащей упоминаемый столбец. |

> [!NOTE]
> К **основному** элементу можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент Association, использующий элемент **ReferentialConstraint** для указания столбцов, участвующих в ограничении внешнего ключа **FK \_ кустомерордерс** . Элемент **Principal** указывает столбец **CustomerID** таблицы **Customer** в качестве основного элемента ограничения.

``` xml
 <Association Name="FK_CustomerOrders">
   <End Role="Customers"
        Type="ExampleModel.Store.Customers" Multiplicity="1">
     <OnDelete Action="Cascade" />
   </End>
   <End Role="Orders"
        Type="ExampleModel.Store.Orders" Multiplicity="*" />
   <ReferentialConstraint>
     <Principal Role="Customers">
       <PropertyRef Name="CustomerId" />
     </Principal>
     <Dependent Role="Orders">
       <PropertyRef Name="CustomerId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```

## <a name="property-element-ssdl"></a>Элемент Property (SSDL)

Элемент **Property** в языке SSDL представляет столбец в таблице в базовой базе данных. Элементы **свойств** являются дочерними элементами типа EntityType, которые представляют строки в таблице. Каждый элемент **Property** , определенный для элемента **EntityType** , представляет столбец.

Элемент **Свойства** не может иметь дочерних элементов.

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **Property** .

| Имя атрибута            | Обязательный | Значение                                                                                                                                                                                                                           |
|:--------------------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **имя**;                  | Да         | Имя соответствующего столбца.                                                                                                                                                                                           |
| **Тип**                  | Да         | Тип соответствующего столбца.                                                                                                                                                                                           |
| **Допускает значения NULL**              | Нет          | Значение **true** (значение по умолчанию) или **false** в зависимости от того, может ли соответствующий столбец иметь значение null.                                                                                                                  |
| **Максимально**          | Нет          | Значение по умолчанию соответствующего столбца.                                                                                                                                                                                  |
| **MaxLength**             | Нет          | Максимальная длина соответствующего столбца.                                                                                                                                                                                 |
| **FixedLength**           | Нет          | Значение **true** или **false** в зависимости от того, будет ли значение соответствующего столбца храниться как строка фиксированной длины.                                                                                                              |
| **Точность**             | Нет          | Точность соответствующего столбца.                                                                                                                                                                                      |
| **Масштаб**                 | Нет          | Масштаб соответствующего столбца.                                                                                                                                                                                          |
| **Юникод**               | Нет          | Значение **true** или **false** в зависимости от того, будет ли соответствующее значение столбца храниться как строка в Юникоде.                                                                                                                   |
| **Параметры сортировки**             | Нет          | Строка, указывающая порядок сортировки, используемый в источнике данных.                                                                                                                                                   |
| **SRID**                  | Нет          | Идентификатор пространственной системной ссылки. Допустимо только для свойств пространственных типов. Дополнительные сведения см. в разделе [SRID](https://en.wikipedia.org/wiki/SRID) and [SRID (SQL Server)](https://msdn.microsoft.com/library/bb964707.aspx). |
| **StoreGeneratedPattern** | Нет          | **Нет**, **удостоверение** (если соответствующее значение столбца является удостоверением, созданным в базе данных) или **вычисляемым** (если соответствующее значение столбца вычислено в базе данных). Недопустимо для свойств RowType. |

> [!NOTE]
> К элементу **Свойства** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **EntityType** с двумя дочерними элементами **свойств** :

``` xml
 <EntityType Name="Customers">
   <Documentation>
     <Summary>Summary here.</Summary>
     <LongDescription>Long description here.</LongDescription>
   </Documentation>
   <Key>
     <PropertyRef Name="CustomerId" />
   </Key>
   <Property Name="CustomerId" Type="int" Nullable="false" />
   <Property Name="Name" Type="nvarchar(max)" Nullable="false" />
 </EntityType>
```

## <a name="propertyref-element-ssdl"></a>Элемент PropertyRef (SSDL)

Элемент **PropertyRef** в языке SSDL ссылается на свойство, определенное в элементе EntityType, чтобы указать, что свойство будет выполнять одну из следующих ролей:

-   Быть частью первичного ключа таблицы, которую представляет **Тип EntityType** . Для определения первичного ключа можно использовать один или несколько элементов **PropertyRef** . Дополнительные сведения см. в разделе Элемент Key.
-   Будет зависимым или основным элементом ссылочного ограничения. Дополнительные сведения см. в разделе Элемент ReferentialConstraint.

Элемент **PropertyRef** может иметь только следующие дочерние элементы:

-   Documentation (ноль или один)
-   Элементы Annotation

### <a name="applicable-attributes"></a>Применимые атрибуты

В следующей таблице описаны атрибуты, которые можно применить к элементу **PropertyRef** .

| Имя атрибута | Обязательный | Значение                                |
|:---------------|:------------|:-------------------------------------|
| **имя**;       | Да         | Имя свойства, на которое дается ссылка. |

> [!NOTE]
> К элементу **PropertyRef** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для CSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **PropertyRef** , используемый для определения первичного ключа с помощью ссылки на свойство, определенное для элемента **EntityType** .

``` xml
 <EntityType Name="Customers">
   <Documentation>
     <Summary>Summary here.</Summary>
     <LongDescription>Long description here.</LongDescription>
   </Documentation>
   <Key>
     <PropertyRef Name="CustomerId" />
   </Key>
   <Property Name="CustomerId" Type="int" Nullable="false" />
   <Property Name="Name" Type="nvarchar(max)" Nullable="false" />
 </EntityType>
```

## <a name="referentialconstraint-element-ssdl"></a>Элемент ReferentialConstraint (SSDL)

Элемент **ReferentialConstraint** в языке SSDL представляет ограничение внешнего ключа (также называемое ограничением ссылочной целостности) в базовой базе данных. Основной и зависимый концы ограничения определяются дочерними элементами Principal и Dependent соответственно. Столбцы, которые участвуют в основном и зависимом концах ограничения, указываются элементами PropertyRef.

Элемент **ReferentialConstraint** является необязательным дочерним элементом элемента Association. Если элемент **ReferentialConstraint** не используется для сопоставления ограничения внешнего ключа, указанного в элементе **Association** , для этого необходимо использовать элемент AssociationSetMapping.

Элемент **ReferentialConstraint** может иметь следующие дочерние элементы:

-   Documentation (ноль или один)
-   Principal (ровно один элемент)
-   Dependent (ровно один элемент)
-   Элементы annotation (ноль или больше)

### <a name="applicable-attributes"></a>Применимые атрибуты

К элементу **ReferentialConstraint** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере показан элемент **Association** , использующий элемент **ReferentialConstraint** для указания столбцов, участвующих в ограничении внешнего ключа **FK \_ кустомерордерс** :

``` xml
 <Association Name="FK_CustomerOrders">
   <End Role="Customers"
        Type="ExampleModel.Store.Customers" Multiplicity="1">
     <OnDelete Action="Cascade" />
   </End>
   <End Role="Orders"
        Type="ExampleModel.Store.Orders" Multiplicity="*" />
   <ReferentialConstraint>
     <Principal Role="Customers">
       <PropertyRef Name="CustomerId" />
     </Principal>
     <Dependent Role="Orders">
       <PropertyRef Name="CustomerId" />
     </Dependent>
   </ReferentialConstraint>
 </Association>
```

## <a name="returntype-element-ssdl"></a>Элемент ReturnType (SSDL)

Элемент **ReturnType** в языке SSDL указывает тип возвращаемого значения для функции, которая определена в элементе **Function** . Тип возвращаемого значения функции также можно указать с помощью атрибута **ReturnType** .

Тип возвращаемого значения функции указывается с помощью атрибута **Type** или элемента **ReturnType** .

Элемент **ReturnType** может иметь следующие дочерние элементы:

- Тип CollectionType (один)  

> [!NOTE]
> К элементу **ReturnType** можно применить любое количество атрибутов аннотации (настраиваемые XML-атрибуты). Однако настраиваемые атрибуты не могут принадлежать к любому пространству имен XML, зарезервированному для SSDL. Полные имена любых двух настраиваемых атрибутов не могут совпадать.

### <a name="example"></a>Пример

В следующем примере используется **функция** , возвращающая коллекцию строк.

``` xml
   <Function Name="GetProducts" IsComposable="true" Schema="dbo">
     <ReturnType>
       <CollectionType>
         <RowType>
           <Property Name="ProductID" Type="int" Nullable="false" />
           <Property Name="CategoryID" Type="bigint" Nullable="false" />
           <Property Name="ProductName" Type="nvarchar" MaxLength="40" Nullable="false" />
           <Property Name="UnitPrice" Type="money" />
           <Property Name="Discontinued" Type="bit" />
         </RowType>
       </CollectionType>
     </ReturnType>
   </Function>
```


## <a name="rowtype-element-ssdl"></a>Элемент RowType (SSDL)

Элемент **RowType** в языке SSDL определяет неименованную структуру как тип возвращаемого значения для функции, определенной в хранилище.

Элемент **RowType** является дочерним элементом элемента **CollectionType** :

Элемент **RowType** может иметь следующие дочерние элементы:

- Property (один или больше)  

### <a name="example"></a>Пример

В следующем примере показана функция Store, которая использует элемент **CollectionType** для указания того, что функция возвращает коллекцию строк (как указано в элементе **RowType** ).


``` xml
   <Function Name="GetProducts" IsComposable="true" Schema="dbo">
     <ReturnType>
       <CollectionType>
         <RowType>
           <Property Name="ProductID" Type="int" Nullable="false" />
           <Property Name="CategoryID" Type="bigint" Nullable="false" />
           <Property Name="ProductName" Type="nvarchar" MaxLength="40" Nullable="false" />
           <Property Name="UnitPrice" Type="money" />
           <Property Name="Discontinued" Type="bit" />
         </RowType>
       </CollectionType>
     </ReturnType>
   </Function>
```

## <a name="schema-element-ssdl"></a>Элемент Schema (SSDL)

Элемент **Schema** в языке SSDL является корневым элементом определения модели хранения. Он содержит определения объектов, функций и контейнеров, из которых состоит модель хранения.

Элемент **Schema** может содержать ноль или более следующих дочерних элементов:

-   Взаимосвязь
-   EntityType
-   EntityContainer
-   Функция

Элемент **Schema** использует атрибут **Namespace** для определения пространства имен для типа сущности и объектов ассоциаций в модели хранения. В пространстве имен не может быть двух объектов с одинаковым именем.

Пространство имен модели хранения отличается от пространства имен XML элемента **Schema** . Пространство имен модели хранения (как определено атрибутом **Namespace** ) является логическим контейнером для типов сущностей и типов взаимосвязей. Пространство имен XML (обозначенное атрибутом **xmlns** ) элемента **Schema** является пространством имен по умолчанию для дочерних элементов и атрибутов элемента **Schema** . Пространства имен XML формы https://schemas.microsoft.com/ado/YYYY/MM/edm/ssdl (где YYYY и mm представляют год и месяц соответственно) зарезервированы для языка SSDL. Пользовательские элементы и атрибуты не могут присутствовать в пространствах имен такого вида.

### <a name="applicable-attributes"></a>Применимые атрибуты

В приведенной ниже таблице описаны атрибуты, которые можно применить к элементу **схемы** .

| Имя атрибута            | Обязательный | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|:--------------------------|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Пространство имен**             | Да         | Пространство имен модели хранения. Значение атрибута **Namespace** используется для формирования полного имени типа. Например, если **EntityType** с именем *Customer* находится в пространстве имен пространстве ExampleModel. Store, полное имя **EntityType** — пространстве ExampleModel. Store. Customer. <br/> Следующие строки не могут использоваться в качестве значения для атрибута **пространства имен** : **System**, **временные**или **EDM**. Значение атрибута **пространства имен** не может совпадать со значением атрибута **Namespace** в элементе CSDL-схемы. |
| **Псевдоним**                 | Нет          | Идентификатор, используемый в качестве имени пространства имен. Например, если **EntityType** с именем *Customer* находится в пространстве имен пространстве ExampleModel. Store, а значение атрибута **Alias** — *Сторажемодел*, то можно использовать сторажемодел. Customer как полное имя **EntityType.**                                                                                                                                                                                                                                                                                    |
| **Поставщик**              | Да         | Поставщик данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **ProviderManifestToken** | Да         | Маркер, который указывает поставщику, какой манифест должен быть возвращен. Формат маркера не определен. Значения для маркера определяются поставщиком. Дополнительные сведения о токенах манифеста поставщика SQL Server см. в разделе SqlClient для Entity Framework.                                                                                                                                                                                                                                                                                                                        |

### <a name="example"></a>Пример

В следующем примере показан элемент **схемы** , содержащий элемент **EntityContainer** , два элемента **EntityType** и один элемент **Association** .

``` xml
 <Schema Namespace="ExampleModel.Store"
       Alias="Self" Provider="System.Data.SqlClient"
       ProviderManifestToken="2008"
       xmlns="https://schemas.microsoft.com/ado/2009/11/edm/ssdl">
   <EntityContainer Name="ExampleModelStoreContainer">
     <EntitySet Name="Customers"
                EntityType="ExampleModel.Store.Customers"
                Schema="dbo" />
     <EntitySet Name="Orders"
                EntityType="ExampleModel.Store.Orders"
                Schema="dbo" />
     <AssociationSet Name="FK_CustomerOrders"
                     Association="ExampleModel.Store.FK_CustomerOrders">
       <End Role="Customers" EntitySet="Customers" />
       <End Role="Orders" EntitySet="Orders" />
     </AssociationSet>
   </EntityContainer>
   <EntityType Name="Customers">
     <Documentation>
       <Summary>Summary here.</Summary>
       <LongDescription>Long description here.</LongDescription>
     </Documentation>
     <Key>
       <PropertyRef Name="CustomerId" />
     </Key>
     <Property Name="CustomerId" Type="int" Nullable="false" />
     <Property Name="Name" Type="nvarchar(max)" Nullable="false" />
   </EntityType>
   <EntityType Name="Orders" xmlns:c="http://CustomNamespace">
     <Key>
       <PropertyRef Name="OrderId" />
     </Key>
     <Property Name="OrderId" Type="int" Nullable="false"
               c:CustomAttribute="someValue"/>
     <Property Name="ProductId" Type="int" Nullable="false" />
     <Property Name="Quantity" Type="int" Nullable="false" />
     <Property Name="CustomerId" Type="int" Nullable="false" />
     <c:CustomElement>
       Custom data here.
     </c:CustomElement>
   </EntityType>
   <Association Name="FK_CustomerOrders">
     <End Role="Customers"
          Type="ExampleModel.Store.Customers" Multiplicity="1">
       <OnDelete Action="Cascade" />
     </End>
     <End Role="Orders"
          Type="ExampleModel.Store.Orders" Multiplicity="*" />
     <ReferentialConstraint>
       <Principal Role="Customers">
         <PropertyRef Name="CustomerId" />
       </Principal>
       <Dependent Role="Orders">
         <PropertyRef Name="CustomerId" />
       </Dependent>
     </ReferentialConstraint>
   </Association>
   <Function Name="UpdateOrderQuantity"
             Aggregate="false"
             BuiltIn="false"
             NiladicFunction="false"
             IsComposable="false"
             ParameterTypeSemantics="AllowImplicitConversion"
             Schema="dbo">
     <Parameter Name="orderId" Type="int" Mode="In" />
     <Parameter Name="newQuantity" Type="int" Mode="In" />
   </Function>
   <Function Name="UpdateProductInOrder" IsComposable="false">
     <CommandText>
       UPDATE Orders
       SET ProductId = @productId
       WHERE OrderId = @orderId;
     </CommandText>
     <Parameter Name="productId"
                Mode="In"
                Type="int"/>
     <Parameter Name="orderId"
                Mode="In"
                Type="int"/>
   </Function>
 </Schema>
```

## <a name="annotation-attributes"></a>Атрибуты примечаний

Атрибуты annotation в языке SSDL представляют собой настраиваемые атрибуты XML в модели хранения, которые содержат дополнительные метаданные об элементах в модели хранения. Атрибуты annotation должны не только иметь допустимую структуру XML, но и соответствовать следующим ограничениям.

-   Атрибуты annotation не должны находиться ни в одном пространстве имен XML, которое зарезервировано для языка SSDL.
-   Полные имена любых двух атрибутов annotation не должны совпадать.

К данному конкретному элементу языка SSDL может применяться несколько атрибутов annotation. Метаданные, содержащиеся в элементах Annotation, могут быть доступны во время выполнения с помощью классов в пространстве имен System. Data. Metadata. EDM.

### <a name="example"></a>Пример

В следующем примере показан элемент EntityType с атрибутом аннотации, примененным к свойству **OrderID** . В примере также показан элемент Annotation, добавленный к элементу **EntityType** .

``` xml
 <EntityType Name="Orders" xmlns:c="http://CustomNamespace">
   <Key>
     <PropertyRef Name="OrderId" />
   </Key>
   <Property Name="OrderId" Type="int" Nullable="false"
             c:CustomAttribute="someValue"/>
   <Property Name="ProductId" Type="int" Nullable="false" />
   <Property Name="Quantity" Type="int" Nullable="false" />
   <Property Name="CustomerId" Type="int" Nullable="false" />
   <c:CustomElement>
     Custom data here.
   </c:CustomElement>
 </EntityType>
```

## <a name="annotation-elements-ssdl"></a>Элементы Annotation (SSDL)

Элементы annotation в языке SSDL представляют собой настраиваемые элементы XML в модели хранения, которые содержат дополнительные метаданные о модели хранения. Элементы annotation должны не только иметь верную структуру XML, но и соответствовать следующим ограничениям.

-   Элементы annotation не должны находиться в каком-либо пространстве имен XML, которое зарезервировано для языка SSDL.
-   Полные имена любых двух элементов annotation не должны совпадать.
-   Элементы annotation должны находиться после всех остальных дочерних элементов в данном элементе SSDL.

У данного элемента языка SSDL может быть больше одного дочернего элемента annotation. Начиная с .NET Framework версии 4 метаданные, содержащиеся в элементах Annotation, могут быть доступны во время выполнения с помощью классов в пространстве имен System. Data. Metadata. EDM.

### <a name="example"></a>Пример

В следующем примере показан элемент EntityType, имеющий элемент Annotation (**кустомелемент**). В примере также показан атрибут аннотации, примененный к свойству **OrderID** .

``` xml
 <EntityType Name="Orders" xmlns:c="http://CustomNamespace">
   <Key>
     <PropertyRef Name="OrderId" />
   </Key>
   <Property Name="OrderId" Type="int" Nullable="false"
             c:CustomAttribute="someValue"/>
   <Property Name="ProductId" Type="int" Nullable="false" />
   <Property Name="Quantity" Type="int" Nullable="false" />
   <Property Name="CustomerId" Type="int" Nullable="false" />
   <c:CustomElement>
     Custom data here.
   </c:CustomElement>
 </EntityType>
```

## <a name="facets-ssdl"></a>Аспекты (модель SSDL)

Аспекты в языке SSDL представляют ограничения для типов столбцов, указанных в элементах Property. Аспекты реализуются как атрибуты XML для элементов **свойств** .

В следующей таблице описываются аспекты, поддерживаемые в SSDL.

| Аспект           | Описание                                                                                                                                                                                                                                                 |
|:----------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Параметры сортировки**   | Задает последовательность сортировки, которая будет использоваться при выполнении операций сравнения и упорядочивания для значений свойств.                                                                                                             |
| **FixedLength** | Указывает, может ли изменяться длина значения столбца.                                                                                                                                                                                                  |
| **MaxLength**   | Указывает максимальную длину значения столбца.                                                                                                                                                                                                           |
| **Точность**   | Для свойств типа **Decimal**указывает количество цифр, которое может иметь значение свойства. Для свойств типа **time**, **DateTime**и **DateTimeOffset**указывается количество цифр для дробной части секунды значения столбца. |
| **Масштаб**       | Задает число цифр справа от десятичной запятой в значении столбца.                                                                                                                                                                      |
| **Юникод**     | Указывает, будет ли значение столбца храниться в Юникоде.                                                                                                                                                                                                    |
