---
title: Сравнение EF6 и EF Core
description: Руководство по выбору между EF6 и EF Core.
author: ajcvickers
ms.date: 01/23/2019
uid: efcore-and-ef6/index
ms.openlocfilehash: 02e5e20d270d1966154e9f564256c9afa9b2d5b4
ms.sourcegitcommit: abda0872f86eefeca191a9a11bfca976bc14468b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/14/2020
ms.locfileid: "90073621"
---
# <a name="compare-ef-core--ef6"></a>Сравнение EF Core и EF6

## <a name="ef-core"></a>EF Core

Entity Framework Core ([EF Core](xref:core/index)) — это современный модуль сопоставления "объект — база данных" для .NET. Он поддерживает запросы LINQ, отслеживание изменений, обновления и миграции схемы.

EF Core работает с SQL Server/SQL Azure, SQLite, Azure Cosmos DB, MySQL, PostgreSQL и многими другими базами данных через [модель подключаемого модуля поставщика базы данных](xref:core/providers/index).

## <a name="ef6"></a>EF6

Entity Framework 6 ([EF6](xref:ef6/index)) — это объектно-реляционный модуль сопоставления, предназначенный для .NET Framework, но с поддержкой для .NET Core. EF6 — это стабильный, поддерживаемый продукт, который больше не разрабатывается.

## <a name="feature-comparison"></a>Сравнение возможностей

EF Core предлагает новые функции, которые не будут реализованы в EF6. Однако в настоящее время в EF Core реализованы не все функции EF6.

В следующей таблице представлено сравнение возможностей, доступных в EF Core и EF6. Это общее сравнение, здесь не указаны все функции и не объясняются различия между одной и той же возможностью в разных версиях EF.

Столбец EF Core содержит версию продукта, в которой эта возможность появилась впервые.

### <a name="creating-a-model"></a>Создание модели

| **Компонент**                                           | **EF6.4**| **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Сопоставление базовых классов                                   | Да      | 1.0                                   |
| Конструкторы с параметрами                          |          | 2.1                                   |
| Преобразования значений свойств                            |          | 2.1                                   |
| Сопоставленные типы без ключей (типы запросов)                             |          | 2.1                                   |
| Соглашения                                           | Да      | 1.0                                   |
| Соглашения об именовании                                    | Да      | 1.0 (частично; [#214](https://github.com/dotnet/efcore/issues/214)) |
| Заметки к данным                                      | Да      | 1.0                                   |
| Текучий API                                            | Да      | 1.0                                   |
| Наследование: одна таблица на иерархию (TPH)                | Да      | 1.0                                   |
| Наследование: одна таблица на тип (TPT)                     | Да      | Запланировано на 5.0 ([#2266](https://github.com/dotnet/efcore/issues/2266)) |
| Наследование: одна таблица на конкретный класс (TPC)           | Да      | Stretch для 5.0 ([#3170](https://github.com/dotnet/efcore/issues/3170)) <sup>(1)</sup> |
| Теневые свойства состояния                               |          | 1.0                                   |
| Альтернативные ключи                                        |          | 1.0                                   |
| Навигация "многие ко многим"                              | Да      | Запланировано на 5.0 ([#19003](https://github.com/dotnet/efcore/issues/19003)) |
| Многие ко многим без сущности соединения                      | Да      | В журнале невыполненных работ ([#1368](https://github.com/dotnet/efcore/issues/1368)) |
| Создание ключей в базе данных                              | Да      | 1.0                                   |
| Создание ключей на стороне клиента                                |          | 1.0                                   |
| Сложные и принадлежащие типы                                   | Да      | 2.0                                   |
| Пространственные данные                                          | Да      | 2.2                                   |
| Формат модели: код                                    | Да      | 1.0                                   |
| Создание модели из базы данных с помощью командной строки              | Да      | 1.0                                   |
| Обновление модели из базы данных                            | Partial  | В журнале невыполненных работ ([#831](https://github.com/dotnet/efcore/issues/831)) |
| Глобальные фильтры запросов                                  |          | 2.0                                   |
| Разбиение таблиц                                       | Да      | 2.0                                   |
| Разбиение сущностей                                      | Да      | Stretch для 5.0 ([#620](https://github.com/dotnet/efcore/issues/620)) <sup>(1)</sup> |
| Сопоставление скалярных функций базы данных                      | Плохо     | 2.0                                   |
| Сопоставление полей                                         |          | 1,1                                   |
| Ссылочные типы, допускающие значение NULL (C# 8.0)                     |          | 3.0                                   |
| Графическое представление модели                      | Да      | Поддержка не запланирована <sup>(2)</sup>     |
| Графический редактор моделей                                | Да      | Поддержка не запланирована <sup>(2)</sup>     |
| Формат модели: EDMX (XML)                              | Да      | Поддержка не запланирована <sup>(2)</sup>     |
| Создание модели из базы данных с помощью мастера VS                 | Да      | Поддержка не запланирована <sup>(2)</sup>     |

### <a name="querying-data"></a>Запрос данных

| **Компонент**                                           | **EF6.4**| **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Запросы LINQ                                          | Да      | 1.0                                   |
| Создание удобного для чтения кода SQL                                | Плохо     | 1.0                                   |
| Преобразование оператора GroupBy                                   | Да      | 2.1                                   |
| Загрузка связанных данных: безотложная                           | Да      | 1.0                                   |
| Загрузка связанных данных: безотложная загрузка для производных типов |          | 2.1                                   |
| Загрузка связанных данных: отложенная                            | Да      | 2.1                                   |
| Загрузка связанных данных: явная                        | Да      | 1,1                                   |
| Необработанные SQL-запросы: типы сущностей                         | Да      | 1.0                                   |
| Необработанные SQL-запросы: Типы сущностей без ключей                 | Да      | 2.1                                   |
| Необработанные запросы SQL: создание с помощью LINQ                  |          | 1.0                                   |
| Явным образом скомпилированные запросы                           | Плохо     | 2.0                                   |
| await foreach (C# 8.0)                                |          | 3.0                                   |
| Язык текстовых запросов (Entity SQL)                | Да      | Поддержка не запланирована <sup>(2)</sup>     |

### <a name="saving-data"></a>Сохранение данных

| **Компонент**                                           | **EF6.4**| **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Отслеживание изменений по моментальному снимку                             | Да      | 1.0                                   |
| Отслеживание изменений по извещениям                         | Да      | 1.0                                   |
| Отслеживание изменений: прокси-серверы                              | Да      | Слияние для 5.0 ([#10949](https://github.com/dotnet/efcore/issues/10949)) |
| Доступ к отслеживаемому состоянию                               | Да      | 1.0                                   |
| Оптимистическая блокировка                                | Да      | 1.0                                   |
| Transactions                                          | Да      | 1.0                                   |
| Пакетная обработка инструкций                                |          | 1.0                                   |
| Сопоставление хранимых процедур                              | Да      | В журнале невыполненных работ ([#245](https://github.com/dotnet/efcore/issues/245)) |
| Низкоуровневые API для несвязных графов                     | Плохо     | 1.0                                   |
| Полный проход несвязных графов                         |          | 1.0 (частично; [#5536](https://github.com/dotnet/efcore/issues/5536)) |

### <a name="other-features"></a>Другие возможности

| **Компонент**                                           | **EF6.4**| **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| Миграции                                            | Да      | 1.0                                   |
| Интерфейсы API для создания и удаления баз данных                       | Да      | 1.0                                   |
| Начальное значение данных                                             | Да      | 2.1                                   |
| Устойчивость подключения                                 | Да      | 1,1                                   |
| Перехватчики                                          | Да      | 3.0                                   |
| События                                                | Да      | 3.0 (частично; [#626](https://github.com/dotnet/efcore/issues/626)) |
| Простое ведение журналов (Database.Log)                         | Да      | Слияние для 5.0 ([#1199](https://github.com/dotnet/efcore/issues/1199)) |
| Создание пулов DbContext                                     |          | 2.0                                   |

### <a name="database-providers-sup3sup"></a>Поставщики баз данных <sup>(3)</sup>

| **Компонент**                                           | **EF6.4**| **EF Core**                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| SQL Server                                            | Да      | 1.0                                   |
| MySQL                                                 | Да      | 1.0                                   |
| PostgreSQL                                            | Да      | 1.0                                   |
| Oracle;                                                | Да      | 1.0                                   |
| SQLite                                                | Да      | 1.0                                   |
| SQL Server Compact                                    | Да      | 1.0 <sup>(4)</sup>                    |
| DB2                                                   | Да      | 1.0                                   |
| Firebird                                              | Да      | 2.0                                   |
| Jet (Microsoft Access)                                |          | 2.0 <sup>(4)</sup>                    |
| Azure Cosmos DB                                       |          | 3.0                                   |
| В памяти (для тестирования)                               |          | 1.0                                   |

<sup>1</sup> Цели Stretch, скорее всего, не будут достигнуты в данном выпуске. Однако, если все пойдет хорошо, мы постараемся добавить их.

<sup>2</sup> Некоторые функции EF6 не будут реализованы в EF Core. Эти функции зависят от базовых EDM EF6 и (или) являются сложными функциями с относительно низкой рентабельностью инвестиций. Мы всегда приветствуем обратную связь, но несмотря на то, что EF Core предоставляет многие функции, недоступные в EF6, для EF Core, наоборот, невозможно поддерживать все функции EF6.

<sup>3</sup> Поставщики баз данных EF Core, реализованные сторонними производителями, могут задерживаться при обновлении до новых основных версий EF Core. Дополнительные сведения можно найти в статье [Поставщики баз данных](xref:core/providers/index).

<sup>4</sup> Поставщики SQL Server Compact и Jet работают только в .NET Framework (но не в .NET Core).

### <a name="supported-platforms"></a>Поддерживаемые платформы

EF Core 3.1 работает на .NET Core и .NET Framework с помощью .NET Standard 2.0. Однако, EF Core 5.0 не будет работать в .NET Framework. Дополнительные сведения см. в разделе [Реализации .NET, поддерживаемые EF Core](xref:core/platforms/index).

EF6.4 выполняется в .NET Core и .NET Framework с помощью многоплатформенного нацеливания.

## <a name="guidance-for-new-applications"></a>Рекомендации для новых приложений

Используйте EF Core в .NET Core для всех новых приложений, если приложению не требуются компоненты, [поддерживаемые только в .NET Framework](/dotnet/standard/choosing-core-framework-server).

## <a name="guidance-for-existing-ef6-applications"></a>Рекомендации для существующих приложений EF6

EF Core не является заменой для EF6. Для перехода с EF6 на EF Core, скорее всего, потребуется внести изменения в приложение.

При перемещении приложения EF6 в .NET Core.

* Продолжайте использовать EF6, если код доступа к данным стабилен и вряд ли будет развиваться или нуждаться в новых функциях.
* Выполняйте перенос в EF Core, если код доступа к данным развивается или приложению нужны новые функции, доступные только в EF Core.
* Перенос в EF Core также часто выполняется для повышения производительности. Однако не все сценарии работают быстрее, поэтому сначала сделайте профилирование.

Дополнительные сведения см. в разделе [Porting from EF6 to EF Core](xref:efcore-and-ef6/porting/index) (Перенос приложений из EF6 в EF).
